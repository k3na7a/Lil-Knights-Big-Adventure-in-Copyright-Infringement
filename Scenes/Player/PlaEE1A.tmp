[gd_scene load_steps=63 format=3 uid="uid://bdij7iwsajls3"]

[ext_resource type="Script" path="res://Scenes/Player/Player.gd" id="1_0p13y"]
[ext_resource type="Shape2D" uid="uid://dd77wiwot0twi" path="res://Scenes/Player/Resources/StandingShape.tres" id="2_5atcj"]
[ext_resource type="PackedScene" uid="uid://uowomoy0ju87" path="res://Scenes/Composition Scenes/state_machine.tscn" id="2_pkowi"]
[ext_resource type="PackedScene" uid="uid://y6gryt781p3a" path="res://Scenes/Composition Scenes/sprite.tscn" id="3_rm1p0"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/Idle.gd" id="3_vce00"]
[ext_resource type="Texture2D" uid="uid://dtgbw50pk61g3" path="res://Scenes/Player/Assets/idle/Warrior_Idle_1.png" id="4_4diaw"]
[ext_resource type="PackedScene" uid="uid://di8618tbhg3u6" path="res://Scenes/Composition Scenes/gravity.tscn" id="4_dy2dd"]
[ext_resource type="Shader" path="res://Resources/shaders/dropshadow.gdshader" id="4_igsq5"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/Run.gd" id="4_ta5dh"]
[ext_resource type="Texture2D" uid="uid://da8j0m4qkv06n" path="res://Scenes/Player/Assets/idle/Warrior_Idle_2.png" id="5_c7xeq"]
[ext_resource type="Texture2D" uid="uid://dooe8m8wclwhq" path="res://Scenes/Player/Assets/idle/Warrior_Idle_3.png" id="6_litgo"]
[ext_resource type="PackedScene" uid="uid://otgkgmbymvw2" path="res://Scenes/Composition Scenes/move_character.tscn" id="6_ljbux"]
[ext_resource type="Texture2D" uid="uid://d0wqyvdnwnarj" path="res://Scenes/Player/Assets/idle/Warrior_Idle_4.png" id="7_f1ajs"]
[ext_resource type="Texture2D" uid="uid://dgxkd5rn7lubs" path="res://Scenes/Player/Assets/idle/Warrior_Idle_5.png" id="8_6uk30"]
[ext_resource type="Texture2D" uid="uid://cusyk2a4hga22" path="res://Scenes/Player/Assets/idle/Warrior_Idle_6.png" id="9_pugqn"]
[ext_resource type="Texture2D" uid="uid://b6wm1brbhfbod" path="res://Scenes/Player/Assets/Run/Warrior_Run_1.png" id="10_nt6us"]
[ext_resource type="Texture2D" uid="uid://mpw2kxgydn2r" path="res://Scenes/Player/Assets/Run/Warrior_Run_2.png" id="11_44lu4"]
[ext_resource type="Texture2D" uid="uid://spktgjulxogp" path="res://Scenes/Player/Assets/Run/Warrior_Run_3.png" id="12_sgyuh"]
[ext_resource type="Texture2D" uid="uid://b51q4rj8vrbmo" path="res://Scenes/Player/Assets/Run/Warrior_Run_4.png" id="13_ekre8"]
[ext_resource type="Texture2D" uid="uid://8q14nticjp41" path="res://Scenes/Player/Assets/Run/Warrior_Run_5.png" id="14_4dlqj"]
[ext_resource type="Texture2D" uid="uid://blgr2kd1ycmov" path="res://Scenes/Player/Assets/Run/Warrior_Run_6.png" id="15_7gi6t"]
[ext_resource type="Texture2D" uid="uid://bk4mulrifyjfk" path="res://Scenes/Player/Assets/Run/Warrior_Run_7.png" id="16_vo0qe"]
[ext_resource type="Texture2D" uid="uid://drbxt6o5ok5ex" path="res://Scenes/Player/Assets/Run/Warrior_Run_8.png" id="17_xwii5"]
[ext_resource type="Texture2D" uid="uid://clp5w3fkmdd5f" path="res://Scenes/Player/Assets/Jump/Warrior_Jump_1.png" id="18_s4kag"]
[ext_resource type="Texture2D" uid="uid://df5is3qje73up" path="res://Scenes/Player/Assets/Jump/Warrior_Jump_2.png" id="19_wa280"]
[ext_resource type="Texture2D" uid="uid://ypxngtquxt27" path="res://Scenes/Player/Assets/Jump/Warrior_Jump_3.png" id="20_ffh15"]
[ext_resource type="Texture2D" uid="uid://djmvw86255yhy" path="res://Scenes/Player/Assets/Fall/Warrior_Fall_1.png" id="21_egc85"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/Jump.gd" id="21_r5cqe"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/Fall.gd" id="22_63qo5"]
[ext_resource type="Texture2D" uid="uid://bbqss1k6tvwuw" path="res://Scenes/Player/Assets/Fall/Warrior_Fall_2.png" id="22_ikhjr"]
[ext_resource type="Texture2D" uid="uid://4vm7jqaev2yy" path="res://Scenes/Player/Assets/Fall/Warrior_Fall_3.png" id="23_kwc68"]
[ext_resource type="PackedScene" uid="uid://ruu7e8q3aag7" path="res://Scenes/Composition Scenes/jump.tscn" id="24_6ucev"]
[ext_resource type="Texture2D" uid="uid://d0gvr487dv2sn" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_5.png" id="28_t0ndg"]
[ext_resource type="Texture2D" uid="uid://cksiox5c18rsd" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_6.png" id="29_gfd0w"]
[ext_resource type="Texture2D" uid="uid://c8dclwhoj4aqh" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_7.png" id="30_1x4ei"]
[ext_resource type="Texture2D" uid="uid://qy38nekh4pss" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_8.png" id="31_3gg20"]
[ext_resource type="Texture2D" uid="uid://fbxpwmtqv5rr" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_9.png" id="32_qmt76"]
[ext_resource type="Texture2D" uid="uid://db1w8t3ds2re4" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_10.png" id="33_lusnk"]
[ext_resource type="Texture2D" uid="uid://chf0qnexfdxqe" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_1.png" id="33_nmsni"]
[ext_resource type="Texture2D" uid="uid://bfpihohldehq7" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_2.png" id="34_mnnyj"]
[ext_resource type="Texture2D" uid="uid://ct8nko0alqn61" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_11.png" id="34_tpg6a"]
[ext_resource type="Texture2D" uid="uid://8c85olchjwtx" path="res://Scenes/Player/Assets/Attack/Warrior_Attack_12.png" id="35_kelvu"]
[ext_resource type="Texture2D" uid="uid://bprdnm2rsxyl3" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_3.png" id="35_mkpfh"]
[ext_resource type="Texture2D" uid="uid://bew7gf3ugp04h" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_4.png" id="36_t505p"]
[ext_resource type="Texture2D" uid="uid://b351h11gm0d3y" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_5.png" id="37_bddg8"]
[ext_resource type="Texture2D" uid="uid://pc3caxjfn12d" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_6.png" id="38_8urxt"]
[ext_resource type="Texture2D" uid="uid://cdvpnfl6438t2" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_7.png" id="39_p1q1m"]
[ext_resource type="Texture2D" uid="uid://dthw4ex641ykq" path="res://Scenes/Player/Assets/Dash Attack/Warrior_Dash-Attack_8.png" id="40_kwwp7"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/Attack.gd" id="41_2xoik"]
[ext_resource type="Script" path="res://Scenes/Player/PlayerState.gd" id="44_vx7wv"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/AttackCombo.gd" id="45_l3gqj"]
[ext_resource type="Script" path="res://Scenes/Player/Scripts/States/AttackDash.gd" id="55_plyfc"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4kjpx"]
shader = ExtResource("4_igsq5")
shader_parameter/radius = 2.0
shader_parameter/modulate = null

[sub_resource type="Animation" id="Animation_gt40t"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("4_4diaw")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../Finite State Machine/Player States/AttackHeavy:dash_speed")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [25.0]
}

[sub_resource type="Animation" id="Animation_4lk4b"]
resource_name = "_attack_combo"
length = 0.3
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("33_lusnk"), ExtResource("34_tpg6a"), ExtResource("35_kelvu")]
}

[sub_resource type="Animation" id="Animation_s2a74"]
resource_name = "_attack_dash"
length = 0.8
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("33_nmsni"), ExtResource("34_mnnyj"), ExtResource("35_mkpfh"), ExtResource("36_t505p"), ExtResource("37_bddg8"), ExtResource("38_8urxt"), ExtResource("39_p1q1m"), ExtResource("40_kwwp7")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../Finite State Machine/Player States/AttackHeavy:dash_speed")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [25.0, 25.0, 25.0, 0.0]
}

[sub_resource type="Animation" id="Animation_22t8e"]
resource_name = "_attack_ground"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("28_t0ndg"), ExtResource("29_gfd0w"), ExtResource("30_1x4ei"), ExtResource("31_3gg20"), ExtResource("32_qmt76")]
}

[sub_resource type="Animation" id="Animation_ksd21"]
resource_name = "_fall"
length = 0.3
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("21_egc85"), ExtResource("22_ikhjr"), ExtResource("23_kwc68")]
}

[sub_resource type="Animation" id="Animation_we774"]
resource_name = "_idle"
length = 0.6
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("4_4diaw"), ExtResource("5_c7xeq"), ExtResource("6_litgo"), ExtResource("7_f1ajs"), ExtResource("8_6uk30"), ExtResource("9_pugqn")]
}

[sub_resource type="Animation" id="Animation_517en"]
resource_name = "_jump"
length = 0.3
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("18_s4kag"), ExtResource("19_wa280"), ExtResource("20_ffh15")]
}

[sub_resource type="Animation" id="Animation_p272v"]
resource_name = "_run"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("10_nt6us"), ExtResource("11_44lu4"), ExtResource("12_sgyuh"), ExtResource("13_ekre8"), ExtResource("14_4dlqj"), ExtResource("15_7gi6t"), ExtResource("16_vo0qe"), ExtResource("17_xwii5")]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_47k3u"]
_data = {
"RESET": SubResource("Animation_gt40t"),
"_attack_combo": SubResource("Animation_4lk4b"),
"_attack_dash": SubResource("Animation_s2a74"),
"_attack_ground": SubResource("Animation_22t8e"),
"_fall": SubResource("Animation_ksd21"),
"_idle": SubResource("Animation_we774"),
"_jump": SubResource("Animation_517en"),
"_run": SubResource("Animation_p272v")
}

[node name="Player" type="Node2D"]

[node name="Character" type="CharacterBody2D" parent="." node_paths=PackedStringArray("state_machine")]
script = ExtResource("1_0p13y")
state_machine = NodePath("../Finite State Machine")

[node name="Sprite" parent="Character" node_paths=PackedStringArray("animation_player") instance=ExtResource("3_rm1p0")]
material = SubResource("ShaderMaterial_4kjpx")
texture = ExtResource("4_4diaw")
offset = Vector2(5.5, 0)
animation_player = NodePath("AnimationPlayer")
h_offset = 5.5

[node name="AnimationPlayer" type="AnimationPlayer" parent="Character/Sprite"]
libraries = {
"": SubResource("AnimationLibrary_47k3u")
}
autoplay = "_idle"

[node name="Collision Body" type="CollisionShape2D" parent="Character"]
position = Vector2(0, 7)
shape = ExtResource("2_5atcj")

[node name="Finite State Machine" parent="." node_paths=PackedStringArray("starting_state") instance=ExtResource("2_pkowi")]
starting_state = NodePath("Player States/Idle")

[node name="Composition Nodes" type="Node" parent="Finite State Machine"]

[node name="Gravity" parent="Finite State Machine/Composition Nodes" node_paths=PackedStringArray("character") instance=ExtResource("4_dy2dd")]
character = NodePath("../../../Character")

[node name="Velocity" parent="Finite State Machine/Composition Nodes" node_paths=PackedStringArray("character") instance=ExtResource("6_ljbux")]
character = NodePath("../../../Character")
velocity = 150.0

[node name="Jump" parent="Finite State Machine/Composition Nodes" node_paths=PackedStringArray("character") instance=ExtResource("24_6ucev")]
character = NodePath("../../../Character")
jump_force = 300

[node name="Player States" type="Node" parent="Finite State Machine" node_paths=PackedStringArray("fall_state", "run_state", "player_velocity", "player_gravity", "state_machine", "sprite", "character")]
script = ExtResource("44_vx7wv")
fall_state = NodePath("Fall")
run_state = NodePath("Run")
player_velocity = NodePath("../Composition Nodes/Velocity")
player_gravity = NodePath("../Composition Nodes/Gravity")
state_machine = NodePath("..")
sprite = NodePath("../../Character/Sprite")
character = NodePath("../../Character")

[node name="Idle" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("fall_state", "run_state", "jump_state", "attack_state", "idle_state", "player_velocity", "player_gravity", "state_machine", "sprite", "character")]
script = ExtResource("3_vce00")
fall_state = NodePath("../Fall")
run_state = NodePath("../Run")
jump_state = NodePath("../Jump")
attack_state = NodePath("../Attack")
idle_state = NodePath(".")
player_velocity = NodePath("../../Composition Nodes/Velocity")
player_gravity = NodePath("../../Composition Nodes/Gravity")
has_control = true
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_idle"
character = NodePath("../../../Character")

[node name="Fall" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("timer", "fall_state", "run_state", "jump_state", "attack_state", "idle_state", "player_velocity", "player_gravity", "state_machine", "sprite", "character")]
script = ExtResource("22_63qo5")
timer = NodePath("Input Buffer")
fall_state = NodePath(".")
run_state = NodePath("../Run")
jump_state = NodePath("../Jump")
attack_state = NodePath("../Attack")
idle_state = NodePath("../Idle")
player_velocity = NodePath("../../Composition Nodes/Velocity")
player_gravity = NodePath("../../Composition Nodes/Gravity")
has_control = true
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_fall"
character = NodePath("../../../Character")

[node name="Input Buffer" type="Timer" parent="Finite State Machine/Player States/Fall"]
wait_time = 0.2
one_shot = true

[node name="Run" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("fall_state", "run_state", "jump_state", "idle_state", "heavy_attack_state", "player_velocity", "player_gravity", "state_machine", "sprite", "character")]
script = ExtResource("4_ta5dh")
fall_state = NodePath("../Fall")
run_state = NodePath(".")
jump_state = NodePath("../Jump")
idle_state = NodePath("../Idle")
heavy_attack_state = NodePath("../AttackHeavy")
player_velocity = NodePath("../../Composition Nodes/Velocity")
player_gravity = NodePath("../../Composition Nodes/Gravity")
has_control = true
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_run"
character = NodePath("../../../Character")

[node name="Jump" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("jump_component", "fall_state", "run_state", "jump_state", "attack_state", "idle_state", "player_velocity", "player_gravity", "state_machine", "sprite", "character")]
script = ExtResource("21_r5cqe")
jump_component = NodePath("../../Composition Nodes/Jump")
fall_state = NodePath("../Fall")
run_state = NodePath("../Run")
jump_state = NodePath(".")
attack_state = NodePath("../Attack")
idle_state = NodePath("../Idle")
player_velocity = NodePath("../../Composition Nodes/Velocity")
player_gravity = NodePath("../../Composition Nodes/Gravity")
has_control = true
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_jump"
character = NodePath("../../../Character")

[node name="Attack" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("combo_timer", "attack_timer", "state_machine", "sprite", "character")]
script = ExtResource("41_2xoik")
combo_timer = NodePath("Combo Timer")
attack_timer = NodePath("Input Buffer")
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_attack_ground"
character = NodePath("../../../Character")

[node name="Input Buffer" type="Timer" parent="Finite State Machine/Player States/Attack"]
wait_time = 0.6
one_shot = true

[node name="Combo Timer" type="Timer" parent="Finite State Machine/Player States/Attack"]
wait_time = 0.4
one_shot = true

[node name="AttackCombo" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("attack_heavy_state", "run_state", "idle_state", "fall_state", "state_machine", "sprite", "character")]
script = ExtResource("45_l3gqj")
attack_heavy_state = NodePath("../AttackHeavy")
run_state = NodePath("../Run")
idle_state = NodePath("../Idle")
fall_state = NodePath("../Fall")
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_attack_combo"
character = NodePath("../../../Character")

[node name="AttackHeavy" type="Node" parent="Finite State Machine/Player States" node_paths=PackedStringArray("run_state", "idle_state", "fall_state", "velocity_component", "state_machine", "sprite", "character")]
script = ExtResource("55_plyfc")
run_state = NodePath("../Run")
idle_state = NodePath("../Idle")
fall_state = NodePath("../Fall")
dash_speed = 25.0
velocity_component = NodePath("../../Composition Nodes/Velocity")
state_machine = NodePath("../..")
sprite = NodePath("../../../Character/Sprite")
animation_name = "_attack_dash"
character = NodePath("../../../Character")

[connection signal="animation_complete" from="Character/Sprite" to="Finite State Machine/Player States/Attack" method="_on_sprite_animation_complete"]
[connection signal="animation_complete" from="Character/Sprite" to="Finite State Machine/Player States/AttackCombo" method="_on_sprite_animation_complete"]
[connection signal="animation_complete" from="Character/Sprite" to="Finite State Machine/Player States/AttackHeavy" method="_on_sprite_animation_complete"]
